# Быстрый старт

Это руководство поможет вам быстро развернуть систему аудита качества коммуникаций.

## Предварительные требования

- Node.js 18+ и npm
- PostgreSQL база данных (рекомендуем Neon для быстрого старта)
- Git

## Шаг 1: Клонирование и установка

\`\`\`bash
# Перейдите в директорию проекта
cd arina

# Установите зависимости
npm install
\`\`\`

## Шаг 2: Настройка базы данных

### Вариант A: Использование Neon (рекомендуется)

1. Зайдите на https://neon.tech и создайте бесплатный аккаунт
2. Создайте новый проект
3. Скопируйте строку подключения (Connection String)

### Вариант B: Локальный PostgreSQL

\`\`\`bash
# Создайте базу данных
createdb audit_system

# Ваша строка подключения будет выглядеть так:
# postgresql://username:password@localhost:5432/audit_system
\`\`\`

## Шаг 3: Настройка переменных окружения

\`\`\`bash
# Скопируйте шаблон
cp .env.example .env

# Отредактируйте .env файл
\`\`\`

Заполните следующие переменные:

\`\`\`env
# Вставьте вашу строку подключения
DATABASE_URL="postgresql://..."

# Для разработки можно оставить по умолчанию
NEXTAUTH_URL="http://localhost:3000"

# Сгенерируйте секретный ключ
# На Windows: используйте онлайн генератор
# На Mac/Linux: openssl rand -base64 32
NEXTAUTH_SECRET="ваш-секретный-ключ"
\`\`\`

## Шаг 4: Инициализация базы данных

\`\`\`bash
# Применить схему к базе данных
npm run prisma:push

# Заполнить начальными данными
npm run seed
\`\`\`

После выполнения seed в системе будут созданы:
- ✅ Администратор (email: `admin@example.com`, пароль: `admin123`)
- ✅ Дефолтная шкала оценок (1 / 0.5 / 0)
- ✅ 6 анкет из JSON файла

## Шаг 5: Запуск приложения

\`\`\`bash
npm run dev
\`\`\`

Откройте браузер и перейдите по адресу: **http://localhost:3000**

## Шаг 6: Первый вход

1. Перейдите на http://localhost:3000
2. Введите учётные данные:
   - Email: `admin@example.com`
   - Пароль: `admin123`
3. Вы попадёте в админ-панель

## Что делать дальше?

### Создайте тестовую компанию

1. Перейдите в **Компании** → **Добавить компанию**
2. Заполните:
   - Название: "Тестовая компания"
   - Дата подключения: сегодня
3. Нажмите "Создать компанию"

### Создайте аналитика

1. Перейдите в **Пользователи** → **Добавить пользователя**
2. Заполните:
   - Имя: "Тест Аналитик"
   - Email: "analyst@test.com"
   - Пароль: "analyst123"
   - Роль: "Аналитик"
3. Нажмите "Создать пользователя"

### Создайте пользователя компании

1. Перейдите в **Пользователи** → **Добавить пользователя**
2. Заполните:
   - Имя: "Представитель компании"
   - Email: "company@test.com"
   - Пароль: "company123"
   - Роль: "Компания"
   - Компания: выберите созданную компанию
3. Нажмите "Создать пользователя"

### Настройте доступ к анкетам для компании

1. Перейдите в **Компании** → выберите компанию
2. В разделе "Доступные анкеты" включите нужные анкеты

### Проведите первый аудит

1. Выйдите из админ-панели
2. Войдите как аналитик (analyst@test.com / analyst123)
3. Нажмите **Новый аудит**
4. Выберите компанию и тип анкеты
5. Заполните оценки
6. Добавьте комментарии
7. Нажмите **Завершить аудит**

### Просмотрите отчёт

1. Выйдите
2. Войдите как пользователь компании (company@test.com / company123)
3. В разделе **Отчёты** увидите завершённый аудит
4. Откройте его для детального просмотра

## Решение проблем

### Ошибка подключения к базе данных

- Проверьте правильность DATABASE_URL
- Убедитесь, что база данных запущена
- Для Neon проверьте, что добавили `?sslmode=require` в конец строки

### Ошибка "Invalid session"

- Убедитесь, что NEXTAUTH_SECRET установлен
- Очистите cookies браузера
- Перезапустите сервер разработки

### Ошибка при seed

- Убедитесь, что файл JSON находится в корневой директории
- Проверьте, что выполнили `npm run prisma:push` перед seed

## Полезные команды

\`\`\`bash
# Просмотр базы данных в браузере
npm run prisma:studio

# Пересоздание базы (удаляет все данные!)
npm run prisma:push -- --force-reset
npm run seed

# Проверка схемы
npx prisma format
npx prisma validate

# Сборка для production
npm run build
\`\`\`

## Следующие шаги

- Ознакомьтесь с полной документацией в [README.md](README.md)
- Настройте вводные данные для компании
- Создайте дополнительные анкеты
- Настройте PDF экспорт

## Поддержка

При возникновении проблем:
1. Проверьте консоль браузера (F12)
2. Проверьте терминал с запущенным сервером
3. Изучите логи Prisma
4. Обратитесь к администратору системы
